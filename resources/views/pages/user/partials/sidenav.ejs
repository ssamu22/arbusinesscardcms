<nav class="sidebar" id="sidebar">
  <!-- Mobile Toggle Button (Only visible on small screens) -->
  <button class="mobile-toggle d-md-none" id="mobileToggle">
    <i class="bi bi-list"></i>
  </button>

  <div class="sidebar-header">
    <div class="d-flex align-items-center">
      <img
        id="sidebarLogo"
        src="/images/lpu_logo_horizontal.jpg"
        height="76px"
      />
      <span class="sidebar-title"></span>
    </div>
    <button class="sidebar-toggle d-none d-md-block" id="sidebarToggle">
      <i class="bi bi-chevron-left"></i>
    </button>
  </div>
  <div class="position-sticky">
    <!-- General Section -->
    <div class="sidebar-section">
      <div class="sidebar-section-header">General</div>
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link active" href="#" data-section="overview">
            <i class="bi bi-house-door"></i>
            <span>Overview</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-section="contacts">
            <i class="bi bi-person-lines-fill"></i>
            <span>Contacts</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Community Section -->
    <div class="sidebar-section">
      <div class="sidebar-section-header">Community</div>
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link" href="#" data-section="organizations">
            <i class="bi bi-building me-2"></i>
            <span>Organizations</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-section="achievements">
            <i class="bi bi-trophy me-2"></i>
            <span>Achievements</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-section="schedule">
            <i class="bi bi-calendar-event me-2"></i>
            <span>Schedule</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Other Links -->
    <div class="sidebar-section">
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link" href="#" data-section="change-password">
            <i class="bi bi-key"></i>
            <span>Change Password</span>
          </a>
        </li>

        <li class="nav-item mt-2">
          <a class="nav-link text-light logout" id="logout-nav-option" href="#">
            <i class="bi bi-box-arrow-right me-2"></i>
            <span>&nbspLogout</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Overlay for mobile -->
<div class="sidebar-overlay" id="sidebarOverlay"></div>

<script>
  document
    .getElementById("logout-nav-option")
    .addEventListener("click", (e) => {
      logout();
    });
  async function logout() {
    try {
      const response = await fetch("/arcms/api/v1/auth/logout", {
        method: "POST",
      });

      const data = await response.json();

      if (data.redirect) {
        window.location.href = data.redirect;
      }
    } catch (error) {
      console.error("Logout error:", error);
    }
  }
</script>
